<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Đặt lại mật khẩu - <span th:text="${appName}">E-Commerce</span></title>
  <link rel="stylesheet" th:href="@{/css/email}" />
</head>
<body>
<div class="container template-reset">
  <!-- Header -->
  <div class="header">
    <div class="icon">🔐</div>
    <h1>Đặt lại mật khẩu</h1>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Security Alert -->
    <div class="alert-section">
      <div class="icon">⚠️</div>
      <h3>Yêu cầu đặt lại mật khẩu</h3>
      <p>Chúng tôi đã nhận được yêu cầu đặt lại mật khẩu cho tài khoản của bạn</p>
    </div>

    <!-- Main Message -->
    <div class="message-section">
      <h2>Xin chào <span th:text="${recipientName}">Bạn</span>!</h2>
      <p>
        Bạn đã yêu cầu đặt lại mật khẩu cho tài khoản <strong th:text="${appName}">E-Commerce</strong> của mình.
        Để tiếp tục, vui lòng nhấp vào nút bên dưới hoặc sử dụng mã đặt lại.
      </p>
    </div>

    <!-- Reset Information -->
    <div class="reset-info">
      <h3>🔑 Thông tin đặt lại mật khẩu</h3>
      <p><strong>Thời gian yêu cầu:</strong> <span th:text="${#temporals.format(#temporals.createNow(), 'dd/MM/yyyy HH:mm:ss')}">Hiện tại</span></p>
      <p><strong>Hiệu lực:</strong> <span th:text="${expiryMinutes}">15</span> phút kể từ thời điểm gửi email</p>

      <!-- Countdown Timer -->
      <div class="expire-timer">
        <div>⏰ Liên kết sẽ hết hạn trong:</div>
        <div class="time" th:text="${expiryMinutes} + ' phút'">15 phút</div>
      </div>
    </div>

    <!-- Reset Token (for manual entry) -->
    <div class="token-info">
      <p><strong>Mã đặt lại mật khẩu:</strong></p>
      <div class="token" th:text="${resetToken}">ABC123XYZ789</div>
      <p style="font-size: 12px; color: #6c757d; margin: 10px 0 0 0;">
        Sao chép mã này nếu nút bên dưới không hoạt động
      </p>
    </div>

    <!-- Call to Action -->
    <div class="cta-section">
      <a th:href="${resetUrl}" class="cta-button">
        🔓 Đặt lại mật khẩu ngay
      </a>
      <br>
      <a th:href="${frontendUrl}" class="cta-button secondary">
        🏠 Về trang chủ
      </a>
    </div>

    <!-- Security Notice -->
    <div class="security-notice">
      <h4>🛡️ Lưu ý bảo mật:</h4>
      <ul>
        <li>Liên kết này chỉ có hiệu lực trong <strong th:text="${expiryMinutes}">15</strong> phút</li>
        <li>Chỉ sử dụng liên kết này nếu bạn đã yêu cầu đặt lại mật khẩu</li>
        <li>Không chia sẻ liên kết hoặc mã này với bất kỳ ai</li>
        <li>Nếu bạn không yêu cầu đặt lại, vui lòng bỏ qua email này</li>
        <li>Liên hệ hỗ trợ nếu bạn nghi ngờ có hoạt động bất thường</li>
      </ul>
    </div>

    <!-- Alternative Instructions -->
    <div style="background-color: #e8f4fd; border-left: 4px solid #0ea5e9; padding: 20px; margin: 30px 0; border-radius: 4px;">
      <h4 style="margin: 0 0 10px 0; color: #0369a1;">📝 Hướng dẫn thay thế:</h4>
      <p style="margin: 0; color: #0369a1; font-size: 14px;">
        Nếu nút không hoạt động, hãy sao chép liên kết sau và dán vào trình duyệt:<br>
        <span style="font-family: monospace; word-break: break-all; background-color: #ffffff; padding: 5px; border-radius: 3px;" th:text="${resetUrl}">Reset URL</span>
      </p>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p><strong><span th:text="${appName}">E-Commerce</span></strong></p>
    <p>Bảo mật tài khoản là ưu tiên hàng đầu của chúng tôi</p>

    <div class="support-info">
      <p><strong>Cần hỗ trợ?</strong></p>
      <p>Email: <a href="mailto:support@ecommerce.com" style="color: #bdc3c7;">support@ecommerce.com</a></p>
      <p>Website: <a th:href="${frontendUrl}" th:text="${frontendUrl}" style="color: #bdc3c7;">Website</a></p>
    </div>

    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #34495e; font-size: 12px; color: #95a5a6;">
      <p>Email này được gửi đến bạn vì có yêu cầu đặt lại mật khẩu từ tài khoản của bạn.</p>
      <p>Nếu không phải bạn thực hiện, vui lòng bỏ qua email này.</p>
      <p>&copy; 2024 <span th:text="${appName}">E-Commerce</span>. Tất cả quyền được bảo lưu.</p>
    </div>
  </div>
</div>
</body>
</html>

<div th:fragment="script" xmlns:th="http://www.thymeleaf.org">
    <!-- jQuery từ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- jQuery UI từ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <!-- Bootstrap JS từ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <!-- Angular từ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>

    <!-- AdminLTE và Custom scripts - giữ local vì không có trên CDN -->
    <script th:src="@{/js/adminlte.min.js}"></script>
    <script th:src="@{/js/app.js}"></script>
    <script th:src="@{/js/dashboard.js}"></script>
    <script th:src="@{/js/function.js}"></script>

    <!-- Custom search function -->
    <script>
        function searchProduct() {
            const query = document.getElementById('searchInput').value.trim();
            const type = document.getElementById('searchType').value;

            if (query === "") {
                alert("Vui lòng nhập từ khóa tìm kiếm.");
                return;
            }

            // Check if query is a number
            const isId = !isNaN(query);
            const numericId = parseInt(query); // Convert to integer

            if (type === "products") {
                if (isId) {
                    // If it's an ID, navigate to /products/ID/{id}
                    window.location.href = `/products/ID/${numericId}`;
                } else {
                    // If it's a product name, navigate to /products/search
                    window.location.href = `/products/search?name=${encodeURIComponent(query)}`;
                }
            } else if (type === "customers") {
                if (isId) {
                    // If it's an ID, navigate to /customers/ID/{id}
                    window.location.href = `/customers/ID/${numericId}`;
                } else {
                    // If it's a customer name, navigate to /customers/search
                    window.location.href = `/customers/search?name=${encodeURIComponent(query)}`;
                }
            } else if (type === "orders") {
                if (isId) {
                    // If it's an ID, navigate to /orders/ID/{id}
                    window.location.href = `/orders/ID/${numericId}`;
                } else {
                    // If it's a product name, navigate to /orders/search
                    window.location.href = `/orders/search?name=${encodeURIComponent(query)}`;
                }
            } else if (type === "suppliers") {
                if (isId) {
                    // If it's an ID, navigate to /suppliers/ID/{id}
                    window.location.href = `/suppliers/ID/${numericId}`;
                } else {
                    // If it's a supplier name, navigate to /suppliers/search
                    window.location.href = `/suppliers/search?name=${encodeURIComponent(query)}`;
                }
            }
        }

        // Enter key support for search
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        searchProduct();
                    }
                });
            }
        });
    </script>

    <!-- Commented out category search script - uncomment if needed -->
    <!--
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchButton = document.getElementById('searchButton');
            const categoryInput = document.getElementById('searchInputByCategory');
            const minPriceInput = document.getElementById('searchMinValue');
            const maxPriceInput = document.getElementById('searchMaxValue');

            if (searchButton) {
                searchButton.addEventListener('click', function() {
                    // Lấy giá trị từ input
                    const category = categoryInput.value.trim();
                    const minPrice = minPriceInput.value.trim();
                    const maxPrice = maxPriceInput.value.trim();

                    // Kiểm tra xem đã nhập đủ thông tin chưa
                    if (category && minPrice && maxPrice) {
                        window.location.href = `/admin/searchcatalogprice?category=${encodeURIComponent(category)}&minPrice=${minPrice}&maxPrice=${maxPrice}&showTable=true`;
                    } else {
                        alert('Vui lòng nhập đầy đủ thông tin');
                    }
                });
            }
        });
    </script>
    -->
</div>
